import sys

import dynamic_reconfigure.parameter_generator_catkin as parameter_generator

gen = parameter_generator.ParameterGenerator()

tracker = gen.add_group("tracker")
ude = gen.add_group("ude")
k_pos = tracker.add_group("Position_Tracking")
k_vel = tracker.add_group("Velocity_Tracking")

ude.add(
    "is_velocity_based",
    parameter_generator.bool_t,
    0,
    "Toggles whether the UDE is velocity/acceleration based",
)
ude.add(
    "gain",
    parameter_generator.double_t,
    0,
    description="Gain for UDE",
    default=4.0,
    min=0.0,
    max=10.0,
)
ude.add(
    "height_threshold",
    parameter_generator.double_t,
    0,
    description="Height threshold for UDE activation",
    default=0.2,
    min=0.0,
    max=20.0,
)

for char, default_pkp, default_vkp in zip("xyz", [0.75, 0.75, 1.0], [5.0, 5.0, 6.0]):
    k_pos.add(
        "pos_p_{}".format(char),
        parameter_generator.double_t,
        0,
        description="P-gain for {}-position control".format(char),
        default=default_pkp,
        min=0.1,
        max=10.0,
    )
    k_vel.add(
        "vel_p_{}".format(char),
        parameter_generator.double_t,
        0,
        description="P-gain for {}-velocity control".format(char),
        default=default_vkp,
        min=0.1,
        max=10.0,
    )

sys.exit(gen.generate("tracking_control", "tracking_control", "TrackingControl"))
